from fastapi import FastAPI
from functools import lru_cache

app = FastAPI()

@lru_cache(maxsize=256)
def calcular_dado_pesado(x: int):
    print("Processando...")  # só processa da 1ª vez
    return x * x * x

@app.get("/calc/{x}")
def calc(x: int):
    return {"resultado": calcular_dado_pesado(x)}
